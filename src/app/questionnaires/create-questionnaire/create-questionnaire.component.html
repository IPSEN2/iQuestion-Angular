<app-navigation>
  <app-toasts></app-toasts>
  <div class="container">
  <button class="btn btn-primary mb-3" type="button" routerLink="/questionnaires">Terug</button>
  <h1> Creeer een vragenlijst </h1>
  <form [formGroup]="questionnaireForm" (ngSubmit)="createQuestionnaire()">

    <div class="form-group mb-3">
      <label for="questionnaireName">Naam vragenlijst</label>
      <input type="text" id="questionnaireName" name="questionnaireName" formControlName="questionnaireName" class="form-control" placeholder="Naam vragenlijst">
    </div>
    <div class="form-group mb-3">
      <label for="questionnaireDescription">Beschrijving vragenlijst</label>
      <textarea type="text" class="form-control mt-2" id="questionnaireDescription" formControlName="questionnaireDescription" placeholder="Beschrijving"></textarea>
    </div>
    <div class="form-group mb-3">
      <label for="questionnaireDescription">Datum van aanmaken</label>
      <input type="date" class="form-control mt-2" id="questionnaireDate" formControlName="questionnaireDate" placeholder="dd/mm/yyyy">
    </div>
    <div class="form-group mb-3">
      <label for="questionnaireName">Naam invuller</label>
      <input type="text" id="userName" name="name" formControlName="userName" class="form-control" placeholder="Naam invuller">
    </div>

    <div style="margin-top:5px; margin-bottom:5px;" >
    <button class="btn btn-success mb-3" type="button" (click)= addNewSegment()>Segment toevoegen</button>
    <table [ngStyle]="{'border': '1px solid grey'}" class="table table-striped" formArrayName="questions">

      <tr *ngFor="let segmentCtrl of segmentControls; let j=index" [formGroupName]="j">
        <th colspan="2">Segment {{j+1}}:</th>
        <th width="200px"><button type="button" (click)="deleteSegment(j)" class="btn btn-danger active mt-3 mb-3">Verwijder segment</button></th>
        <th width="150px"><button type="button" (click)="addQuestion()" class="btn btn-success active mt-3 mb-3">Vraag toevoegen</button></th>
      </tr>

      <div class="form-group mb-3" *ngFor="let questionCtrl of questionControls; let i=index" [formGroupName]="i">
        <label for="questionnaireName">Vraag {{i+1}}</label>
        <input type="text" class="form-control" formControlName="question" placeholder="Mooie vraag invuller">
      </div>


<!--      <tr *ngFor="let questionCtrl of questionControls; let i=index" [formGroupName]="i" layout-align="center center">-->
<!--        <td>-->
<!--          <label class="mt-3"> Vraag {{i+1}} </label>-->
<!--          <input type="text" class="form-control" formControlName="question" placeholder="Mooie vragen">-->
<!--        </td>-->
<!--        <td>-->
<!--          <select id="userRoleInput" class="form-select" aria-label="Default select example" formControlName="questionnaireType">-->
<!--            <option value="Open">Open</option>-->
<!--            <option value="Gesloten">Gesloten</option>-->
<!--          </select>-->
<!--        <td>-->
<!--          <button (click)="deleteQuestion(i)" class="btn btn-danger active">Vraag verwijderen</button>-->
<!--        </td>-->
<!--      </tr>-->

    </table>
    </div>

    <button type="submit" class="btn btn-primary mt-3" routerLink="/questionnaires" [disabled]="!questionnaireForm.valid">CreÃ«er</button>
  </form>
  <br/>
</div>
</app-navigation>

