<app-navigation>
  <app-toasts></app-toasts>
  <div>
  <button class="btn btn-primary mb-3" type="button" routerLink="/questionnaires">Terug</button>
  <h1> Creeer een vragenlijst </h1>
  <form [formGroup]="questionnaireForm" (ngSubmit)="createQuestionnaire()">

    <div class="form-group mb-3">
      <label for="questionnaireName">Naam vragenlijst</label>
      <input type="text" id="questionnaireName" name="questionnaireName" formControlName="questionnaireName" class="form-control" placeholder="Naam vragenlijst">
    </div>
    <div class="form-group mb-3">
      <label for="questionnaireDescription">Beschrijving vragenlijst</label>
      <textarea type="text" class="form-control mt-2" id="questionnaireDescription" formControlName="questionnaireDescription" placeholder="Beschrijving"></textarea>
    </div>
    <div class="form-group mb-3">
      <label for="questionnaireDescription">Datum van aanmaken</label>
      <input type="date" class="form-control mt-2" id="questionnaireDate" formControlName="questionnaireDate" placeholder="dd/mm/yyyy">
    </div>
    <div class="form-group mb-3">
      <label for="questionnaireName">Naam invuller</label>
      <input type="text" id="userName" name="name" formControlName="userName" class="form-control" placeholder="Naam invuller">
    </div>

    <div style="margin-top:5px; margin-bottom:5px;" >
      <div class="d-grid gap-3 d-md-flex justify-content-md-begin">
        <button class="btn btn-success mb-3" type="button" (click)= addNewSegment()>Segment toevoegen</button>
        <button class="btn btn-danger mb-3 right-button" type="button" (click)= clearAlleSegmenten()>Verwijder alle segment</button>
        <button class="btn btn-outline-danger mb-3 right-button" type="button" (click)= clearForm()>Vragenlijst formulier legen</button>
      </div>

      <table [ngStyle]="{'border': '1px solid grey'}" class="table table-striped" formArrayName="segments">

      <tr *ngFor="let segmentCtrl of segmentControls; let j=index" [formGroupName]="j">
        <th colspan="2">Segment {{j+1}}:
          <input type="text" class="form-control" formControlName="segments" placeholder="Naam segment">
        </th>
        <th width="200px"><button type="button" (click)="deleteSegment(j)" class="btn btn-danger active mt-3 mb-3">Verwijder segment</button></th>
        <th width="150px"><button type="button" (click)="addQuestion()" class="btn btn-success active mt-3 mb-3">Vraag toevoegen</button></th>
      </tr>

      <tr Ngclass="form-group mb-3" *ngFor="let questionCtrl of questionControls; let i=index" [formGroupName]="i">
        <th class="mt-3" for="questionnaireName">Vraag {{i+1}}</th>
        <input type="text" class="form-control" formControlName="question" placeholder="Mooie vraag invuller">
        <div>
          <select id="userRoleInput" class="form-select" aria-label="Default select example" formControlName="questionnaireType">
            <option value="Open">Open</option>
            <option value="Gesloten">Gesloten</option>
          </select>
        </div>
        <th>
          <button type="button" (click)="deleteQuestion(i)" class="btn btn-danger active mt-3 mb-3">Verwijder vraag</button>
        </th>
      </tr>

    </table>
    </div>

    <button type="submit" class="btn btn-primary mt-3" routerLink="/questionnaires" [disabled]="!questionnaireForm.valid">CreÃ«er</button>
  </form>
  <br/>
</div>

  <pre>{{questionnaireSegmentsArray.value | json}}</pre>
</app-navigation>

